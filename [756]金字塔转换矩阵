# ç°åœ¨ï¼Œæˆ‘ä»¬ç”¨ä¸€äº›æ–¹å—æ¥å †ç Œä¸€ä¸ªé‡‘å­—å¡”ã€‚ æ¯ä¸ªæ–¹å—ç”¨ä»…åŒ…å«ä¸€ä¸ªå­—æ¯çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚
#
#  ä½¿ç”¨ä¸‰å…ƒç»„è¡¨ç¤ºé‡‘å­—å¡”çš„å †ç Œè§„åˆ™å¦‚ä¸‹ï¼š
#
#  å¯¹äºä¸‰å…ƒç»„(A, B, C) ï¼Œâ€œCâ€ä¸ºé¡¶å±‚æ–¹å—ï¼Œæ–¹å—â€œAâ€ã€â€œBâ€åˆ†åˆ«ä½œä¸ºæ–¹å—â€œCâ€ä¸‹ä¸€å±‚çš„çš„å·¦ã€å³å­å—ã€‚å½“ä¸”ä»…å½“(A, B, C)æ˜¯è¢«å…è®¸çš„ä¸‰å…ƒç»„ï¼Œæˆ‘
# ä»¬æ‰å¯ä»¥å°†å…¶å †ç Œä¸Šã€‚
#
#  åˆå§‹æ—¶ï¼Œç»™å®šé‡‘å­—å¡”çš„åŸºå±‚ bottomï¼Œç”¨ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºã€‚ä¸€ä¸ªå…è®¸çš„ä¸‰å…ƒç»„åˆ—è¡¨ allowedï¼Œæ¯ä¸ªä¸‰å…ƒç»„ç”¨ä¸€ä¸ªé•¿åº¦ä¸º 3 çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚
#
#  å¦‚æœå¯ä»¥ç”±åŸºå±‚ä¸€ç›´å †åˆ°å¡”å°–å°±è¿”å› true ï¼Œå¦åˆ™è¿”å› false ã€‚
#
#
#
#  ç¤ºä¾‹ 1ï¼š
#
#  è¾“å…¥ï¼šbottom = "BCD", allowed = ["BCG", "CDE", "GEA", "FFF"]
# è¾“å‡ºï¼štrue
# è§£æï¼š
# å¯ä»¥å †ç Œæˆè¿™æ ·çš„é‡‘å­—å¡”:
#     A
#    / \
#   G   E
#  / \ / \
# B   C   D
#
# å› ä¸ºç¬¦åˆ('B', 'C', 'G'), ('C', 'D', 'E') å’Œ ('G', 'E', 'A') ä¸‰ç§è§„åˆ™ã€‚
#
#
#  ç¤ºä¾‹ 2ï¼š
#
#  è¾“å…¥ï¼šbottom = "AABA", allowed = ["AAA", "AAB", "ABA", "ABB", "BAC"]
# è¾“å‡ºï¼šfalse
# è§£æï¼š
# æ— æ³•ä¸€ç›´å †åˆ°å¡”å°–ã€‚
# æ³¨æ„, å…è®¸å­˜åœ¨åƒ (A, B, C) å’Œ (A, B, D) è¿™æ ·çš„ä¸‰å…ƒç»„ï¼Œå…¶ä¸­ C != Dã€‚
#
#
#
#
#  æç¤ºï¼š
#
#
#  bottom çš„é•¿åº¦èŒƒå›´åœ¨ [2, 8]ã€‚
#  allowed çš„é•¿åº¦èŒƒå›´åœ¨[0, 200]ã€‚
#  æ–¹å—çš„æ ‡è®°å­—æ¯èŒƒå›´ä¸º{'A', 'B', 'C', 'D', 'E', 'F', 'G'}ã€‚
#
#  Related Topics ä½è¿ç®— æ·±åº¦ä¼˜å…ˆæœç´¢
#  ğŸ‘ 54 ğŸ‘ 0


# leetcode submit region begin(Prohibit modification and deletion)
class Solution(object):
    def pyramidTransition(self, bottom, allowed):
        map = {}
        for allo in allowed:
            key = allo[0:2]
            val = allo[2]
            if map.has_key(key):
                map[key].add(val)
            else:
                list = set()
                list.add(val)
                map[key] = list
        if len(map) == 0:
            return False

        def pyramid(bottom):
            lis = []
            lis .append("")
            for i in range(1, len(bottom)):
                if map.has_key(bottom[i - 1: i + 1]):
                    vals = map[bottom[i - 1: i + 1]]
                    liss = []
                    for l in lis:
                        for v in vals:
                            liss.append(l + v)
                    lis = liss
                else:
                    return False
            for l in lis:
                if len(l) == 1:
                    return True
                if pyramid(l):
                    return True
            return False

        return pyramid(bottom)

if __name__ == "__main__":
    r = Solution()
    rs = r.pyramidTransition(bottom = "AABA", allowed = ["AAA", "AAB", "ABA", "ABB", "BAC"])
    print(rs)

# leetcode submit region end(Prohibit modification and deletion)
